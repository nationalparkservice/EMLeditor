<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>EML Creation Script • EMLeditor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EML Creation Script">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EMLeditor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01_prereqs.html">Pre-Requisites</a></li>
    <li><a class="dropdown-item" href="../articles/a02_EML_creation_script.html">EML Creation Script</a></li>
    <li><a class="dropdown-item" href="../articles/a03_Template_edits.html">Editing .txt Files</a></li>
    <li><a class="dropdown-item" href="../articles/a04_Editing_fixing_eml.html">Editing or fixing EML Files</a></li>
    <li><a class="dropdown-item" href="../articles/a05_advanced_functionality.html">Advanced Functionality</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nationalparkservice/EMLeditor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>EML Creation Script</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nationalparkservice/EMLeditor/blob/main/vignettes/a02_EML_creation_script.Rmd" class="external-link"><code>vignettes/a02_EML_creation_script.Rmd</code></a></small>
      <div class="d-none name"><code>a02_EML_creation_script.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This page mirrors the editable EML Creation template that is included
with the EMLeditor package (and has been installed if you installed
either EMLeditor on its own or as part of the NPSdataverse). To access
an editable version of this script, open R studio and select the “File”
drop-down menu. Choose “New File” and select “R markdown” from the
submenu. In the pop-up box, select “From Template” and then highlight
“Editable_EML_Creation_Workflow {Emleditor}” (likely the first item in
the list). Click “OK” to open the template.</p>
<p><img src="../reference/figures/open_rmd.png" alt="a graphic showing the first steps used to access the template EML creation script included with the EMLeditor package." width="45%" style="display: block; margin: auto;"></p>
<p><img src="../reference/figures/EMLtemplate.png" alt="a graphic showing the final steps used to access the template EML creation script included with the EMLeditor package." width="45%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>This script acts as a template file for end-to-end creation of EML
metadata in R for DataStore. The metadata generated will be of
sufficient quality for the data package Reference Type and can be used
to automatically populate the DataStore fields for this reference type.
The script utilizes multiple R packages and the example inputs are for
an EVER Veg Map AA dataset. The example script is meant to either be run
as a test of the process or to be replaced with your own content. This
is a step by step process where each section should be reviewed, edited
if necessary, and run one at a time. After completing a section there is
often something to do external to R (e.g. open a text file and add
content). Several EMLassemblyline functions are decision points and may
only apply to certain data packages. This workflow takes advantage of
the NPSdataverse, an R-based ecosystem that includes external EML
creation tools such as the R packages EMLassemblyline and EML. However,
these tools were not designed to work with DataStore. Therefore, the
NPSdataverse and this workflow also incorporate steps from NPS-developed
R packages such as EMLeditor and DPchecker. You will necessarily
over-write some of the information generated by EMLassemblyline. That is
OK and is expected behavior.</p>
</div>
<div class="section level2">
<h2 id="good-additional-references">Good additional references<a class="anchor" aria-label="anchor" href="#good-additional-references"></a>
</h2>
<p><a href="https://ediorg.github.io/EMLassemblyline/" class="external-link">EMLassemblyline</a></p>
</div>
<div class="section level2">
<h2 id="install-and-load-r-packages">Install and Load R Packages<a class="anchor" aria-label="anchor" href="#install-and-load-r-packages"></a>
</h2>
<p>Install packages. If you have not recently installed packages, please
re-install them. You will want to make sure you have the latest versions
of all the NPSdataverse packages - QCkit, EMLeditor, DPchecker, and
NPSutils - as they are under constant development.</p>
<p>If you run into errors installing packages from github on NPS
computers you may first need to run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>download.file.method<span class="op">=</span><span class="st">"wininet"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install packages</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"devtools"</span>, <span class="st">"tidyverse"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"nationalparkservice/NPSdataverse"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># When loading packages, you may be advised to update to more recent versions</span></span>
<span><span class="co"># of dependent packages. Most of these updates likely are not critical.  </span></span>
<span><span class="co"># However, it is important that you update to the latest versions of QCkit, </span></span>
<span><span class="co"># EMLeditor, DPchecker and NPSutils as these NPS packages are under constant </span></span>
<span><span class="co"># development.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">NPSdataverse</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-eml">Generating EML<a class="anchor" aria-label="anchor" href="#generating-eml"></a>
</h2>
<div class="section level3">
<h3 id="set-the-overall-package-details">Set the overall package details<a class="anchor" aria-label="anchor" href="#set-the-overall-package-details"></a>
</h3>
<p>All of the following items should be reviewed and updated to fit the
package you are working on. For lists of more than one item, keep the
same order (i.e. item #1 should correspond to the same file in each
list).</p>
</div>
<div class="section level3">
<h3 id="metadata-filename">Metadata filename<a class="anchor" aria-label="anchor" href="#metadata-filename"></a>
</h3>
<p>This becomes the file name of your .xml file. Be sure it ends in
_metadata to comply with data package specifications. You do not need to
include the extension (.xml).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata_id</span> <span class="op">&lt;-</span> <span class="st">"Test_EVER_AA_metadata"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="package-title">Package Title<a class="anchor" aria-label="anchor" href="#package-title"></a>
</h3>
<p>Give the data package a title. FAIR principles suggest titles of
between 7 and 20 words. Be sure to make your title informative and
consider how a naive user would interpret it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">package_title</span> <span class="op">&lt;-</span> <span class="st">"TEST_Everglades National Park Accuracy Assessment (AA) Data Package"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-collection-status">Data collection status<a class="anchor" aria-label="anchor" href="#data-collection-status"></a>
</h3>
<p>Choose from either “ongoing” or “complete”</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_type</span> <span class="op">&lt;-</span> <span class="st">"complete"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="path-to-data-files">Path to data file(s)<a class="anchor" aria-label="anchor" href="#path-to-data-files"></a>
</h3>
<p>Tell R where your data files are. If they are in the working
directory, you can set the working_folder to <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code>. If
they are in a different directory you will need to specify that
directory.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">working_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># or:</span></span>
<span><span class="co"># working_folder &lt;- setwd("C:/users/&lt;yourusername&gt;/Documents/my_data_package_folder)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="list-data-files">List data files<a class="anchor" aria-label="anchor" href="#list-data-files"></a>
</h3>
<p>Tell R what your data files are called.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if the data files are in your working directory (and the only .csv files in your working directory are data files:</span></span>
<span><span class="va">data_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"*.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># alternatively, you can list the files out manually:</span></span>
<span><span class="co">#data_files &lt;- c("qry_Export_AA_points.csv",</span></span>
<span><span class="co">#                "qry_Export_AA_VegetationDetails.csv")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="name-the-data-files">Name the data files<a class="anchor" aria-label="anchor" href="#name-the-data-files"></a>
</h3>
<p>These should be relatively short, but perhaps more informative than
the actual file names. Make sure that they are in the same order as the
files in data_files.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TEST_AA Point Location Data"</span>,</span>
<span>                <span class="st">"TEST_AA Vegetation Coverage Data"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="describe-each-data-file">Describe each data file<a class="anchor" aria-label="anchor" href="#describe-each-data-file"></a>
</h3>
<p>Data file descriptions should be unique and about 10 words long.
Descriptions will be used in auto-generated tables within the ReadMe and
DRR. If you need to use more than 10 words, consider putting that
information into the abstract, methods, or additional information
sections. Again, make sure these are in the same order as the files they
are describing.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_descriptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TEST_Everglades Vegetation Map Accuracy Assessment point data"</span>,</span>
<span>                       <span class="st">"TEST_Everglades Vegetation Map Accuracy Assessment vegetation data"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="placeholder-url-for-data-files">Placeholder URL for data files<a class="anchor" aria-label="anchor" href="#placeholder-url-for-data-files"></a>
</h3>
<p>EMLassemblyline needs to know where the data files will be (a URL).
However, because you have not yet initiated a draft reference in
DataStore, it isn’t possible to specify a URL. Instead, insert a place
holder. Don’t worry - this information will be updated later on when you
add a Digital Object Identifier(DOI) to the metadata.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"temporary URL"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">data_files</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="taxonomic-information">Taxonomic information<a class="anchor" aria-label="anchor" href="#taxonomic-information"></a>
</h3>
<p>Specify where you taxonomic information is. this can be a single file
or a list of files and fields (columns) with scientific names that will
be used to automatically generate the taxonomic coverage metadata. We
suggest using <a href="https://dwc.tdwg.org/terms" class="external-link">DarwinCore</a> for
column names, such as “scientificName”. If your data package does not
have taxonomic data, skip this step.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the file(s) where scientific names are located:</span></span>
<span><span class="va">data_taxa_tables</span> <span class="op">&lt;-</span> <span class="st">"qry_Export_AA_VegetationDetails.csv"</span></span>
<span></span>
<span><span class="co"># the column where your scientific names are within the data files.</span></span>
<span><span class="va">data_taxa_fields</span> <span class="op">&lt;-</span> <span class="st">"scientific_Name"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="geographic-information">Geographic information<a class="anchor" aria-label="anchor" href="#geographic-information"></a>
</h3>
<p>Specify the tables and fields that contain geographic coordinates and
site names. This information will be used to fill out the geographic
coverage elements of the metadata. If your data package does not have
geographic information skip this step. If the only geographic
information you are supplying is the park units (and their bounding
boxes) you can also skip this step; Park Units and the corresponding GPS
coordinates for their bounding boxes will be added at a later step. If
your coordinates are in UTMs and not GPS, try the <a href="https://nationalparkservice.github.io/QCkit/reference/convert_utm_to_ll.html" class="external-link"><code>convert_utm_to_ll()</code></a>
function in the <a href="https://nationalparkservice.github.io/QCkit/" class="external-link">QCkit
package</a></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_coordinates_table</span> <span class="op">&lt;-</span> <span class="st">"qry_Export_AA_points.csv"</span></span>
<span><span class="va">data_latitude</span> <span class="op">&lt;-</span> <span class="st">"decimalLatitude"</span></span>
<span><span class="va">data_longitude</span> <span class="op">&lt;-</span> <span class="st">"decimalLongitude"</span></span>
<span><span class="va">data_sitename</span> <span class="op">&lt;-</span> <span class="st">"Point_ID"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="temporal-information">Temporal information<a class="anchor" aria-label="anchor" href="#temporal-information"></a>
</h3>
<p>This should indicate collection date of the first and last data point
in the data package (across all files) and does not include any
planning, pre- or post-processing time. The format should be one that
complies with the International Standards Organization’s standard 8601.
The recommended format for EML is: YYYY-MM-DD, where Y is the four digit
year, M is the two digit month code (01 - 12 for example, January = 01),
and D is the two digit day of the month (01 - 31). Using an alternate
format or setting the date to the future will cause errors down the
road!</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">startdate</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2010-01-26"</span><span class="op">)</span></span>
<span><span class="va">enddate</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2013-01-04"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="emlassemblyline-functions">EMLassemblyline Functions<a class="anchor" aria-label="anchor" href="#emlassemblyline-functions"></a>
</h2>
<p>The next set of functions are meant to be considered one by one and
only run if applicable to a particular data package. The first year will
typically see all of these run, but if the data format and protocol stay
constant over time it may be possible to skip some in future years.
Additionally some datasets may not have geographic or taxonomic
component.</p>
<div class="section level3">
<h3 id="function-1---core-metadata-information">FUNCTION 1 - Core Metadata Information<a class="anchor" aria-label="anchor" href="#function-1---core-metadata-information"></a>
</h3>
<p>This function creates blank .txt template files for the <a href="a03_Template_edits.html#abtract-txt">abstract</a>, <a href="a03_Template_edits.html#additional_info">additional
information</a>, <a href="a03_Template_edits.html#custom_units-txt">custom units</a>, <a href="a03_Template_edits.html#intellectual_rights-txt">intellectual
rights</a>, <a href="a03_Template_edits.html#keywords-txt">keywords</a>,
<a href="a03_Template_edits.html#methods-txt">methods</a>, and <a href="a03_Template_edits.html#personnel-txt">personnel</a>.</p>
<p>The <a href="a03_Template_edits.html#personnel-txt">personnel.txt
file can best be edited in excel</a>. You must list at least one person
with a “creator” role and one person with a “contact” role (you can list
the same person twice for both.). Creators will be authors and included
in the data package citation. You do not need to list anyone as the “PI”
and can list as many additional people with custom roles as desired
(e.g. “field technician”, “laboratory assistant”). Each individual must
have a surName. The electornicMailAddress is an email and the userId is
the persons’s <a href="https://orcid.org" class="external-link">ORCID</a> (if they have one).
List the ORCID as just the 16 digit string, do not include the <a href="https://orcid.org" class="external-link uri">https://orcid.org</a> prefix
(e.g. xxxx-xxxx-xxxx-xxxx). You can leave the projectTitle,
fundingAgency, and fundingNumber blank. Contrary to EML assemblyline’s
warnings you do not need to have a designated Principle Investigator
(PI) listed in the personnel.txt file.</p>
<p>We encourage you to craft your <a href="a03_Template_edits.html#abstract-txt">abstract</a> in a text
editor, NOT Word. Your abstract will be forwarded to data.gov, DataCite,
google dataset search, etc. so it is worth some time to carefully
consider what is relevant and important information for an abstract.
Abstracts must be greater than 20 words. Good abstracts tend to be 250
words or less. You may consider including the following information: The
premise for the data collection (why was it done?), why is it important,
a brief overview of relevant methods, and a brief explanation of what
data are included such as the period of time, location(s), and type of
data collected. Keep in mind that if you have lengthy descriptions of
methods, provenance, data QA/QC, etc it may be better to expand upon
these topics in a Data Release Report or similar document uploaded
separately to DataStore.</p>
<p>Currently this function inserts a Creative Common 0 license. The CC0
license will need to be updated. However, to ensure that the licence
meets NPS specifications and properly coincides with CUI designations,
the best way to update the license information is during a later step
using <code><a href="../reference/set_int_rights.html">EMLeditor::set_int_rights()</a></code>. There is no need to edit
this .txt file.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EMLassemblyline</span><span class="fu">::</span><span class="fu">template_core_metadata</span><span class="op">(</span>path <span class="op">=</span> <span class="va">working_folder</span>, </span>
<span>                       license <span class="op">=</span> <span class="st">"CC0"</span><span class="op">)</span> <span class="co"># that '0' is a zero!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="function-2---data-table-attributes">FUNCTION 2 - Data Table Attributes<a class="anchor" aria-label="anchor" href="#function-2---data-table-attributes"></a>
</h3>
<p>This function creates an <a href="a03_Template_edits.html#attributes_-txt">“attributes_datafilename.txt”</a>
file for each data file. This can be opened in Excel (we recommend
against trying to update these in a text editor) and fill in/adjust the
columns for attributeDefinition, class, unit, etc. refer to <a href="https://ediorg.github.io/EMLassemblyline/articles/edit_tmplts.html" class="external-link uri">https://ediorg.github.io/EMLassemblyline/articles/edit_tmplts.html</a>
for helpful hints and <code>view_unit_dictionary()</code> for potential
units. This will only need to be run again if the attributes (name,
order or new/deleted fields) are modified from the previous year. NOTE
that if these files already exist from a previous run, they are not
overwritten.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EMLassemblyline</span><span class="fu">::</span><span class="fu">template_table_attributes</span><span class="op">(</span>path <span class="op">=</span> <span class="va">working_folder</span>, </span>
<span>                          data.table <span class="op">=</span> <span class="va">data_files</span>, </span>
<span>                          write.file <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="function-3---data-table-categorical-variable">FUNCTION 3 - Data Table Categorical Variable<a class="anchor" aria-label="anchor" href="#function-3---data-table-categorical-variable"></a>
</h3>
<p>This function Creates a <a href="a03_Template_edits.html#catvars_-txt">“catvars_datafilename.txt”</a>
file for each data file that has columns with a class = categorical.
These .txt files will include each unique ‘code’ and allow input of the
corresponding ‘definition’.NOTE that since the list of codes is
harvested from the data itself, it’s possible that additional codes may
have been relevant/possible but they are not automatically included
here. Consider your lookup lists carefully to see if additional options
should be included (e.g if your dataset DPL values are all set to
“Accepted” this function will not include “Raw” or “Provisional” in the
resulting file and you may want to add those manually). NOTE that if
these files already exist from a previous run, they are not
overwritten.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EMLassemblyline</span><span class="fu">::</span><span class="fu">template_categorical_variables</span><span class="op">(</span>path <span class="op">=</span> <span class="va">working_folder</span>, </span>
<span>                               data.path <span class="op">=</span> <span class="va">working_folder</span>, </span>
<span>                               write.file <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="function-4---geographic-coverage">FUNCTION 4 - Geographic Coverage<a class="anchor" aria-label="anchor" href="#function-4---geographic-coverage"></a>
</h3>
<p>If the only geographic coverage information you plan on using are
park boundaries, you can skip this step. You can add park unit
connections using EMLeditor, which will automatically generate properly
formatted GPS coordinates for the park bounding boxes.</p>
<p>If you would like to add additional GPS coordinates (such as for
specific site locations, survey plots, or bounding boxes for locations
within a park, etc) please do.</p>
<p>This function creates a geographic_coverage.txt file that lists your
sites as points as long as your coordinates are in lat/long. If your
coordinates are in UTM it is probably easiest to convert them first or
create the geographic_coverage.txt file another way (see <a href="https://nationalparkservice.github.io/QCkit/" class="external-link">QCkit</a> for R
functions that will convert UTM to lat/long).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EMLassemblyline</span><span class="fu">::</span><span class="fu">template_geographic_coverage</span><span class="op">(</span>path <span class="op">=</span> <span class="va">working_folder</span>, </span>
<span>                             data.path <span class="op">=</span> <span class="va">working_folder</span>,</span>
<span>                             data.table <span class="op">=</span> <span class="va">data_coordinates_table</span>, </span>
<span>                             lat.col <span class="op">=</span> <span class="va">data_latitude</span>, </span>
<span>                             lon.col <span class="op">=</span> <span class="va">data_longitude</span>,</span>
<span>                             site.col <span class="op">=</span> <span class="va">data_sitename</span>, </span>
<span>                             write.file <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="function-5---taxonomic-coverage">FUNCTION 5 - Taxonomic Coverage<a class="anchor" aria-label="anchor" href="#function-5---taxonomic-coverage"></a>
</h3>
<p>This function creates a taxonomic_coverage.txt file if you have
taxonomic data. Currently supported authorities are 3 = ITIS, 9 = WORMS,
and 11 = GBIF. In the example below, the function will first try to find
the scientific name at ITIS and if it fails will then look at GBIF. If
you have lots of taxa, this could take some time to complete.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EMLassemblyline</span><span class="fu">::</span><span class="fu">template_taxonomic_coverage</span><span class="op">(</span>path <span class="op">=</span> <span class="va">working_folder</span>, </span>
<span>                            data.path <span class="op">=</span> <span class="va">working_folder</span>, </span>
<span>                            taxa.table <span class="op">=</span> <span class="va">data_taxa_tables</span>,</span>
<span>                            taxa.col <span class="op">=</span> <span class="va">data_taxa_fields</span>, </span>
<span>                            taxa.authority <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">11</span><span class="op">)</span>,</span>
<span>                            taxa.name.type <span class="op">=</span> <span class="st">'scientific'</span>, </span>
<span>                            write.file <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="create-an-eml-object">Create an EML object<a class="anchor" aria-label="anchor" href="#create-an-eml-object"></a>
</h2>
<p>Run this (it may take a little while) and see if it validates (you
should see ‘Validation passed’). It will generate an R object called
“my_metadata”. The function could alert you of some issues to review as.
Run the function <code>issues()</code> at the end of the process to get
feedback on items that might be missing or need attention. Fix these
issues and then re-run the <code>make_eml()</code> function.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLassemblyline</span><span class="fu">::</span><span class="fu">make_eml</span><span class="op">(</span>path <span class="op">=</span> <span class="va">working_folder</span>,</span>
<span>               dataset.title <span class="op">=</span> <span class="va">package_title</span>,</span>
<span>               data.table <span class="op">=</span> <span class="va">data_files</span>,</span>
<span>               data.table.name <span class="op">=</span> <span class="va">data_names</span>,</span>
<span>               data.table.description <span class="op">=</span> <span class="va">data_descriptions</span>,</span>
<span>               data.table.url <span class="op">=</span> <span class="va">data_urls</span>,</span>
<span>               temporal.coverage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">startdate</span>, <span class="va">enddate</span><span class="op">)</span>,</span>
<span>               maintenance.description <span class="op">=</span> <span class="va">data_type</span>,</span>
<span>               package.id <span class="op">=</span> <span class="va">metadata_id</span>,</span>
<span>               return.obj <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>               write.file <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-for-eml-validity">Check for EML validity<a class="anchor" aria-label="anchor" href="#check-for-eml-validity"></a>
</h2>
<p>This is a good point to pause and test whether your EML is valid.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/emld/reference/eml_validate.html" class="external-link">eml_validate</a></span><span class="op">(</span><span class="va">my_metadata</span><span class="op">)</span></span></code></pre></div>
<p>if your EML is valid you should see the following (admittedly
cryptic) result:</p>
<pre><code><span><span class="co"># [1] TRUE</span></span>
<span><span class="co"># attr(,"errors")</span></span>
<span><span class="co"># character(0)</span></span></code></pre>
<p>if your EML is not schema valid, the function will notify you of
specific problems you need to address. We HIGHLY recommend that you use
the EMLassemblyline and/or EMLeditor functions to fix your EML and do
not attempt to edit it by hand.</p>
</div>
<div class="section level2">
<h2 id="add-nps-specific-fields-to-eml">Add NPS specific fields to EML<a class="anchor" aria-label="anchor" href="#add-nps-specific-fields-to-eml"></a>
</h2>
<p>Now that you have valid EML metadata, you need to add NPS-specific
elements and fields. For instance, unit connections, DOIs, referencing a
DRR, etc. More information about these functions can be found at: <a href="https://nationalparkservice.github.io/EMLeditor/" class="uri">https://nationalparkservice.github.io/EMLeditor/</a>.</p>
<div class="section level3">
<h3 id="add-controlled-unclassified-information-cui-codes">Add Controlled Unclassified Information (CUI) codes<a class="anchor" aria-label="anchor" href="#add-controlled-unclassified-information-cui-codes"></a>
</h3>
<p>This is a required step, using the function
<code><a href="../reference/set_cui_code.html">set_cui_code()</a></code>. It is important to indicate not only that
your data package contains CUI, but also to inform users if your data
package does NOT contain CUI because empty fields can be ambiguous (does
it not contain CUI ordid the creators just miss that step?). You can
choose from one of five CUI dissemination codes. Watch out for the
spaces! These are:</p>
<ul>
<li>PUBLIC - Does NOT contain CUI.</li>
<li>FED ONLY - Contains CUI. Only federal employees should have access
(similar to “internal only” in DataStore).</li>
<li>FEDCON - Contains CUI. Only federal employees and federal
contractors should have access (also very much like current “internal
only” setting in DataStore).</li>
<li>DL ONLY - Contains CUI. Should only be available to a named list of
individuals (where and how to list those individuals TBD)</li>
<li>NOCON - Contains CUI. Federal, state, local, or tribal employees may
have access, but contractors cannot. More information about these codes
can be found at: <a href="https://www.archives.gov/cui/registry/limited-dissemination" class="external-link uri">https://www.archives.gov/cui/registry/limited-dissemination</a>
</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_cui_code.html">set_cui_code</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="st">"PUBLIC"</span><span class="op">)</span></span>
<span><span class="co"># note that in this case I have added the CUI code to the original R object, </span></span>
<span><span class="co"># "my_metadata" but by giving it a new name, i.e. "my_meta2" I could have</span></span>
<span><span class="co"># created a new R object. Sometimes creating a new R object is preferable </span></span>
<span><span class="co"># because if you make a mistake you don't need to start over again.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="intellectual-rights">Intellectual Rights<a class="anchor" aria-label="anchor" href="#intellectual-rights"></a>
</h3>
<p>EMLassemblyine and ezEML provide some attractive looking boilerplate
for setting the intellectual rights. It looks reasonable and so is easy
to just keep. However, NPS has some specific regulations about what can
and cannot be in the intellectualRights tag. Use
<code><a href="../reference/set_int_rights.html">set_int_rights()</a></code> to replace the text with NPS-approved
text. Note: You must first add the CUI dissemination code using
<code><a href="../reference/set_cui.html">set_cui()</a></code> as the dissemination code and license must agree.
That is, you cannot give a data package with a PUBLIC dissemination code
a “restricted” license (and vise versa: a restricted data package that
contains CUI cannot have a public domain or CC0 license). You can choose
from one of three options, but <strong>for most public NPS data
packages, the CC0 license is appropriate</strong>:</p>
<ul>
<li><p>“restricted”: If the data contains Controlled Unclassified
Information (CUI), the intellectual rights must read: <strong>“This
product has been determined to contain Controlled Unclassified
Information (CUI) by the National Park Service, and is intended for
internal use only. It is not published under an open license.
Unauthorized access, use, and distribution are
prohibited.”</strong></p></li>
<li><p>“public”: If the data do not contain CUI, the default is the
public domain. The intellectual rights must read: <strong>“This work is
in the public domain. There is no copyright or
license.”</strong></p></li>
<li><p>“CC0”: If you need a license, for instance if you are working
with a partner organization that requires a license, use CC0:
<strong>“The person who associated a work with this deed has dedicated
the work to the public domain by waiving all of his or her rights to the
work worldwide under copyright law, including all related and
neighboring rights, to the extent allowed by law. You can copy, modify,
distribute and perform the work, even for commercial purposes, all
without asking permission.”</strong></p></li>
</ul>
<p>The <code><a href="../reference/set_int_rights.html">set_int_rights()</a></code> function will also put the name of
your license in a field in EML for DataStore harvesting.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># choose from "restricted", "public" or "CC0" (zero), see above:</span></span>
<span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_int_rights.html">set_int_rights</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="st">"CC0"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-a-data-package-doi">Add a data package DOI<a class="anchor" aria-label="anchor" href="#add-a-data-package-doi"></a>
</h3>
<p>Add your data package’s Digital Object Identifier (DOI) to the
metadata. The <code><a href="../reference/set_datastore_doi.html">set_datastore_doi()</a></code> function requires that
you are logged on to the VPN. It initiates a draft data package
reference on DataStore, and populates the reference with a title pulled
from your metadata, “[DRAFT] : <your data package title>”. This
temporary title is purely for your tracking purposes and can easily be
updated later. The <code><a href="../reference/set_datastore_doi.html">set_datastore_doi()</a></code> function will then
insert the corresponding DOI for your data package into your metadata.
Now that a draft reference has been initiated on DataStore, it is
possible to fill in the online URL for each data file.
<code><a href="../reference/set_datastore_doi.html">set_datastore_doi()</a></code> automatically does that for you too.
There are a few things to keep in mind: 1) Your DOI and the data package
reference are not yet active and are not publicly accessible until after
review and activation/publication. 2) We suggest you NOT manually upload
files. If you manually upload your files, be sure to upload your data
package to the correct draft reference! It is easy to create several
draft references with the same draft title but different DataStore
reference IDs and DOIs. So check the reference ID number carefully 3)
There is no need to fill in additional fields in DataStore at this point
- many of them will be auto-populated based on the metadata you upload.
Any fields you do populate will be over-written by the content in your
metadata.</your></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_datastore_doi.html">set_datastore_doi</a></span><span class="op">(</span><span class="va">my_metadata</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-information-about-a-drr-optional">Add information about a DRR (optional)<a class="anchor" aria-label="anchor" href="#add-information-about-a-drr-optional"></a>
</h3>
<p>If you are producing (or plan to produce) a DRR, add links to the DRR
describing the data package.</p>
<p>You will need the DOI for the DRR you are drafting as well as the
DRR’s Title. Go to DataStore and initiate a draft DRR, including a
title. For the purposes of the data package, there is no need to
populate any other fields. At this point, you do not need to activate
the DRR reference and, while a DOI has been reserved for your DRR, it
will not be activated until after publication so that you have plenty of
time to construct the DRR.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_drr.html">set_drr</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="fl">7654321</span>, <span class="st">"DRR Title"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="set-the-language">Set the language<a class="anchor" aria-label="anchor" href="#set-the-language"></a>
</h3>
<p>This is the human language (as opposed to computer language) that the
data package and metadata are constructed in. Examples include English,
Spanish, Navajo, etc. A full list of available languages is available
from the Libraryof Congress. Please use the “English Name of Language”
as an input. The function will then convert your input to the
appropriate 3-character ISO 639-2 code.Available languages: <a href="https://www.loc.gov/standards/iso639-2/php/code_list.php" class="external-link uri">https://www.loc.gov/standards/iso639-2/php/code_list.php</a></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_language.html">set_language</a></span><span class="op">(</span><span class="va">my_metadata</span>,</span>
<span>                                       <span class="st">"English"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-content-unit-links">Add content unit links<a class="anchor" aria-label="anchor" href="#add-content-unit-links"></a>
</h3>
<p>These are the park units where data were collected from, for instance
ROMO, not ROMN. If the data package includes data from more than one
park, they can all be listed. For instance, if data were collected from
all park units within a network, each unit should be listed separately
rather than the network. This is because the geographic coordinates
corresponding to bounding boxes for each park unit listed will
automatically be generated and inserted into the metadata. Individual
park units will be more informative than the bounding box for the entire
network.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">park_units</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ROMO"</span>, <span class="st">"GRSA"</span>, <span class="st">"YELL"</span><span class="op">)</span></span>
<span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_content_units.html">set_content_units</a></span><span class="op">(</span><span class="va">my_metadata</span>,</span>
<span>                                            <span class="va">park_units</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-the-producing-units">Add the Producing Unit(s)<a class="anchor" aria-label="anchor" href="#add-the-producing-units"></a>
</h3>
<p>This is the unit(s) responsible for generating the data package. It
may be a single park (ROMO) or a network (ROMN). It may be identical to
the units listed in the previous step, overlapping, or entirely
different.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a single producing unit:</span></span>
<span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_producing_units.html">set_producing_units</a></span><span class="op">(</span><span class="va">my_metadata</span>,</span>
<span>                                              <span class="st">"ROMN"</span><span class="op">)</span></span>
<span><span class="co"># alternatively, a list of producing units:</span></span>
<span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_producing_units.html">set_producing_units</a></span><span class="op">(</span><span class="va">my_metadata</span>,</span>
<span>                                              <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ROMN"</span>, <span class="st">"GRYN"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-a-project-optional">Add a project (optional)<a class="anchor" aria-label="anchor" href="#add-a-project-optional"></a>
</h3>
<p>You can add a DataStore project to your metadata. Once the metadata
are extracted on DataStore, your data package will automatically be
added to the DataStore project. A few things to keep in mind: 1)
DataStore only supports one project connection and will use the first
DataStore project in your metadata (although you can have many other
projects). 2) DataStore will only make connections between data packages
and projects; it will not remove them. If you want to remove the
connection you must do it manually via the web interface. 3) The project
must be public to add it to metadata. 4) Whoever uploads and extracts
the metadata on DataStore must have ownership level permissions on both
the data package and the project.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># where "1234567" is the DataStore Reference id for the Project</span></span>
<span><span class="co"># that the data package should be linked to.</span></span>
<span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/set_project.html">set_project</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="fl">1234567</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="validate-your-eml">Validate your EML<a class="anchor" aria-label="anchor" href="#validate-your-eml"></a>
</h3>
<p>Almost done! This is another great time to validate your EML and make
sure Everything is schema valid. Run:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/emld/reference/eml_validate.html" class="external-link">eml_validate</a></span><span class="op">(</span><span class="va">my_metadata</span><span class="op">)</span></span></code></pre></div>
<p>if your EML is valid you should see the following (admittedly
crypitic):</p>
<pre><code><span><span class="co"># [1] TRUE</span></span>
<span><span class="co"># attr(,"errors")</span></span>
<span><span class="co"># character(0)</span></span></code></pre>
<p>if your EML is not schema valid, the function will notify you of
specific problems you need to address. We HIGHLY recommend that you use
the EMLassemblyline and/or EMLeditor functions to fix your EML and do
not attempt to edit it by hand.</p>
</div>
</div>
<div class="section level2">
<h2 id="write-your-eml-to-an-xml-file">Write your EML to an xml file<a class="anchor" aria-label="anchor" href="#write-your-eml-to-an-xml-file"></a>
</h2>
<p>Now it’s time to convert your R object to an .xml file and save it.
Keep in mind that the file name should end with “_metadata.xml”.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/EML/reference/write_eml.html" class="external-link">write_eml</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="st">"mymetadatafilename_metadata.xml"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-your--xml-file">Check your .xml file<a class="anchor" aria-label="anchor" href="#check-your--xml-file"></a>
</h2>
<p>You’re EML metadata file should be ready for upload. You can run some
additional tests on your .xml metadata file. This function assumes there
is only one .xml file in the directory:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This assumes that you have written your metadata to an .xml file and that the .xml file is in the current working directory.</span></span>
<span><span class="fu">DPchecker</span><span class="fu">::</span><span class="fu">run_congruence_checks</span><span class="op">(</span>check_metadata_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If you .xml file with metadata is in a different directory, you will have to specify that:</span></span>
<span><span class="co"># DPchecker::run_congruence_checks("C:/Users/&lt;yourusername&gt;/Documents/my_data_package", check_metadata_only = TRUE)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-your-data-package">Check your data package<a class="anchor" aria-label="anchor" href="#check-your-data-package"></a>
</h2>
<p>If your data package is now complete, you can run some test prior to
upload to make sure that the package fits some minimal set of
requirements and that the data and metadata are properly specified and
coincide. This assumes that your data package is in the root of your R
project. It will run all of the checks in the code chunk directly above
“check your .xml file” and then some!</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this assumes that the data package is the working directory</span></span>
<span><span class="fu">DPchecker</span><span class="fu">::</span><span class="fu">run_congruence_checks</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># if your data package is somewhere else, specify that:</span></span>
<span><span class="co"># DPchecker::run_congruence_checks("C:/Users/&lt;yourusername&gt;/Documents/my_data_package")</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="upload-your-data-package">Upload your data package<a class="anchor" aria-label="anchor" href="#upload-your-data-package"></a>
</h2>
<p>If everything checked out, you should be ready to upload your data
package! We recommend using <code><a href="../reference/upload_data_package.html">upload_data_package()</a></code> to
accomplish this. The function automatically checks your DOI and uploads
to the correct reference on DataStore. All of your files for the data
package need to be in the same folder, there can be only one .xml file
(ending in “_metadata.xml”) and all the other files should be data files
in .csv format. Each individual file should be &lt; 32Mb. If you have
files &gt; 32Mb, you will need to upload them manually using the web
interface on DataStore.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this assumes your data package is in the current working directory</span></span>
<span><span class="fu">EMLeditor</span><span class="fu">::</span><span class="fu"><a href="../reference/upload_data_package.html">upload_data_package</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If your data package is somewhere else, specify that:</span></span>
<span><span class="co">#upload_data_package("C:/Users/&lt;yourusername&gt;/Documents/my_data_package)</span></span></code></pre></div>
<p>From within DataStore you should be able to extract all the
information from the metadata file to populate the relevant DataStore
fields. In the upper right, select “Edit” from the drop down menu. Then
click on the “Files and Links” tab. On the left side of the files list,
select the radio button corresponding to your metadata. Then click the
“Extract Metadata” button from the top right of box with the files
listed in it.</p>
<p>Please don’t activate your reference just yet! Data package
references need to be reviewed prior to activation. We are still working
on what that review process will look like.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Baker, Judd Patterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
