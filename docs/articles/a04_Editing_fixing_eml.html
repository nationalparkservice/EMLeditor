<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Editing or fixing EML Files • EMLeditor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Editing or fixing EML Files">
<meta name="description" content="Resources and Guides for using EMLassemblyline to create EML for National Park Service data packages
">
<meta property="og:description" content="Resources and Guides for using EMLassemblyline to create EML for National Park Service data packages
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EMLeditor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01_prereqs.html">Pre-Requisites</a></li>
    <li><a class="dropdown-item" href="../articles/a02_EML_creation_script.html">EML Creation Script</a></li>
    <li><a class="dropdown-item" href="../articles/a03_Template_edits.html">Editing .txt Files</a></li>
    <li><a class="dropdown-item" href="../articles/a04_Editing_fixing_eml.html">Editing or fixing EML Files</a></li>
    <li><a class="dropdown-item" href="../articles/a05_advanced_functionality.html">Advanced Functionality</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nationalparkservice/EMLeditor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Editing or fixing EML Files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nationalparkservice/EMLeditor/blob/HEAD/vignettes/a04_Editing_fixing_eml.Rmd" class="external-link"><code>vignettes/a04_Editing_fixing_eml.Rmd</code></a></small>
      <div class="d-none name"><code>a04_Editing_fixing_eml.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>EMLeditor is designed not only to generate metadata that interacts
with DataStore but to also allow users to ‘surgically’ edit EML fields
without having to edit any of the .txt templates or run the
<code>EML::make_eml()</code> command (which can be time consuming,
especially if there is substantial taxonomic information). Using
EMLeditor also means you don’t need to edit the .xml file by hand. We
<strong>strongly discourage</strong> editing the .xml file by hand!</p>
<p>If you find typos or mistakes in your EML or if after your data
package is reviewed changes to the EML are requested, it is our hope
that you can use the EMLeditor functions to make changes to your EML
rather than re-running the entire EML creation script.</p>
<p>When you run the <code><a href="https://nationalparkservice.github.io/DPchecker/reference/run_congruence_checks.html" class="external-link">DPchecker::run_congruence_checks()</a></code>
function on your data package, each warning and error returned should
include an indication of how to address the problem. If the problem is
with the metadata (as opposed to the data), DPchecker should give you a
specific function you can use to fix the metadata using the EMLeditor
package.</p>
<p>To edit your EML in R using EMLeditor, you will first need to load
the *_metadata.xml file in to R, edit the R object from within R, and
then write the edited R object back to .xml.</p>
</div>
<div class="section level2">
<h2 id="function-list">Function list<a class="anchor" aria-label="anchor" href="#function-list"></a>
</h2>
<p>The <a href="../reference/index.html">References</a> page has a
comprehensive list of all the available functions and links to
documentation on how to use each function along with examples.</p>
</div>
<div class="section level2">
<h2 id="loading--xml-into-r">Loading .xml into R<a class="anchor" aria-label="anchor" href="#loading--xml-into-r"></a>
</h2>
<p>There are two main methods of loading your *_metadata.xml file in to
R to work on it. You can either use the DPchecker
<code>load_metadata()</code> function or you can use the EML
<code>read_eml()</code> function. The main benefit of
<code>load_metadata()</code> is that you don’t need to specify the file
name or type, so there is less typing. The downside to
<code>load_metadata()</code> is that it is less flexible: if there are
multiple .xml files in the directory or the metadata file doesn’t end in
*_metadata.xml it just won’t work.</p>
<p>Using <code>load_metadata()</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#assuming your metadata file is in your current working directory:</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu">load_metadata</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#assuming your metadata file is in sub-directory of your current directory, "../other/directory":</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"other"</span>, <span class="st">"directory"</span><span class="op">)</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu">load_metadata</span><span class="op">(</span>directory <span class="op">=</span> <span class="va">dir</span><span class="op">)</span></span></code></pre></div>
<p>Using <code>read_eml()</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#this assumes your metadata file is in your current working directory and is called 'filename_metadata.xml'</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu">read_eml</span><span class="op">(</span><span class="st">"filename_metadata.xml"</span>, from <span class="op">=</span> <span class="st">"xml"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#or if your metadata is in a different directory, change to that directory:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"C:/Users/username/Documents/data_package_directory"</span><span class="op">)</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu">read_eml</span><span class="op">(</span><span class="st">"filename_metadata.xml"</span>, from <span class="op">=</span> <span class="st">"xml"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples-of-editing-metadata">Examples of editing metadata<a class="anchor" aria-label="anchor" href="#examples-of-editing-metadata"></a>
</h2>
<div class="section level3">
<h3 id="edit-the-title">Edit the title<a class="anchor" aria-label="anchor" href="#edit-the-title"></a>
</h3>
<p>First, you might want to view the current title:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_title.html">get_title</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>Then you can consider editing the title:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_title.html">set_title</a></span><span class="op">(</span><span class="va">metadata</span>, <span class="st">"My New and Improved Data Package Title"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="edit-the-abstract">Edit the abstract<a class="anchor" aria-label="anchor" href="#edit-the-abstract"></a>
</h3>
<p>View your current abstract:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_abstract.html">get_abstract</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>Supply a new abstract. This function is relatively simple and does
not support multiple parts or paragraphs, it’s probably best to keep the
text relatively short and straight forward.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_abstract</span> <span class="op">&lt;-</span> <span class="st">"Put your new abstract here. It should be more than 20 words and shoudl be sufficient for a knowledgeable person to understand what whas done, when, and where including both data collection and data QA/QC but does nto need to be as detailed as a methods statement"</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_abstract.html">set_abstract</a></span><span class="op">(</span><span class="va">metadata</span>, <span class="va">new_abstract</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-orcids">Add ORCIDs<a class="anchor" aria-label="anchor" href="#add-orcids"></a>
</h3>
<p>Do this BEFORE adding any organizations as creators. If you already
have organizations as creators, you may want to temporarily remove them
while you add ORCIDs for individuals (see
<code><a href="../reference/set_creator_order.html">set_creator_order()</a></code>). If you did not know that you the
authors/creators of your data package had ORCIDs (or you didn’t register
one until after making the initial metadata), you can add ORCIDs for
individual creators. Make sure to list the ORCIDs in the same order as
the authors/creators are listed. If a creator does not have an ORCID,
list it as NA:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#single author publications:</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_creator_orcids.html">set_creator_orcids</a></span><span class="op">(</span><span class="va">metadata</span>, <span class="st">"1234-1234-1234-1234"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#multiple author publications where the middle author does not have an ORCID:</span></span>
<span><span class="va">creator_orcids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1234-1234-1234-1234"</span>, <span class="cn">NA</span>, <span class="st">"4321-4321-4321-4321"</span><span class="op">)</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_creator_orcids.html">set_creator_orcids</a></span><span class="op">(</span><span class="va">metadata</span>, <span class="va">creator_orcids</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-an-organization-as-an-author">Add an Organization as an author<a class="anchor" aria-label="anchor" href="#add-an-organization-as-an-author"></a>
</h3>
<p>You can add an organization as an author (“creator”) and then
re-order the authors to reflect whatever order you would like them to
appear in the citation.</p>
<p>First, view the current authors (“creators”). Note that this function
will only return a list of individual creators and will not return any
organizations that may already be listed as creators/authors:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">get_author_list</span>(metadata)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Smith, John C."</span></span></code></pre></div>
<p>Add an organization as an author:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set an outside organization as an author:</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_creator_orgs.html">set_creator_orgs</a></span><span class="op">(</span><span class="va">metadata</span>, creator_orgs <span class="op">=</span> <span class="st">"Broadleaf, Inc."</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set a park unit as a creator</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_creator_orgs.html">set_creator_orgs</a></span><span class="op">(</span><span class="va">metadata</span>, park_units <span class="op">=</span> <span class="st">"YELL"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># You can also add a list of organizations as authors for collaborative works:</span></span>
<span><span class="va">networks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ROMN"</span>, <span class="st">"MOJN"</span><span class="op">)</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_creator_orgs.html">set_creator_orgs</a></span><span class="op">(</span><span class="va">metadata</span>, park_units <span class="op">=</span> <span class="va">networks</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="re-order-or-remove-authors">Re-order or remove authors<a class="anchor" aria-label="anchor" href="#re-order-or-remove-authors"></a>
</h3>
<p>You may notice that any author or creator you add will be added to
the end of the list of authors/creators. You may then wish to re-order
the authors/creators. The <code><a href="../reference/set_creator_order.html">set_creator_order()</a></code> function’s
default interactive mode lists all the authors in order (surName only
for individuals) and asks you to supply an order. You can also use this
function to remove authors.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">set_creator_order</span>(metadata)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#Your current creators are in the following order:</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># Order                   Creator</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#     1                     Smith</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#     2           Broadleaf, Inc.</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#     3 Yellowstone National Park</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#     4     Mojave Desert Network</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#     5    Rocky Mountain Network</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#Please enter comma-separated numbers for the new creator order.</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#Example: put 5 creators in reverse order, enter: 5, 4, 3, 2, 1</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#Example: remove the 3rd item (out of 5) enter: 1, 2, 4, 5</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co">#Your new creators order is:</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="co"># Order                   Creator</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co">#     1    Rocky Mountain Network</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co">#     2     Mojave Desert Network</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="co">#     3 Yellowstone National Park</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co">#     4           Broadleaf, Inc.</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co">#     5                     Smith</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="write-your-edits-to--xml">Write your edits to .xml<a class="anchor" aria-label="anchor" href="#write-your-edits-to--xml"></a>
</h2>
<p>Before writing your edits to .xml, make sure to validate your
EML:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">test_validate_schema</span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>Write your R object to .xml. Don’t forget that the filename must end
in *_metadata.xml:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write_eml</span><span class="op">(</span><span class="va">metadata</span>, <span class="st">"filename_metadata.xml"</span><span class="op">)</span></span></code></pre></div>
<p>At this point, you should re-run the congruence checks to make sure
your data package is still passes them all (or passes any previous
warnings/errors you got):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Assuming you data package is in the working directory and there are no extra .csv or .xml files in that directory:</span></span>
<span><span class="fu">run_congruence_checks</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Baker, Judd Patterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
