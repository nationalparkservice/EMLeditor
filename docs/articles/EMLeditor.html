<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="EMLeditor">
<title>EMLeditor • EMLeditor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EMLeditor">
<meta property="og:description" content="EMLeditor">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EMLeditor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/EMLeditor.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nationalparkservice/EMLeditor/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>EMLeditor</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nationalparkservice/EMLeditor/blob/HEAD/vignettes/EMLeditor.Rmd" class="external-link"><code>vignettes/EMLeditor.Rmd</code></a></small>
      <div class="d-none name"><code>EMLeditor.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>In addition to <a href="https://github.com/nationalparkservice/EMLeditor" class="external-link">EMLeditor</a>,
you will also need the <a href="https://cran.r-project.org/web/packages/EML/index.html" class="external-link">EML</a>
package to complete these steps.</p>
<p>You can download and install them individually, or get everything you
need at once from the <a href="https://nationalparkservice.github.io/NPSdataverse/" class="external-link">NPSdataverse</a>
using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install the NPSdataverse:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nationalparkservice/NPSdataverse"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RobLBaker/NPSdataverse" class="external-link">NPSdataverse</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#individual install:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nationalparkservice/EMLeditor"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"EML"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/EML/" class="external-link">EML</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nationalparkservice/EMLeditor" class="external-link">EMLeditor</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="workflow-outline">Workflow Outline<a class="anchor" aria-label="anchor" href="#workflow-outline"></a>
</h2>
<p>EMLeditor’s primary objective is to edit and view EML formatted
files, not to generate them from scratch. A suggested workflow is:</p>
<ol style="list-style-type: decimal">
<li>Use the EMLassemblyline::make_eml() to generate an initial EML
document and save it as a .xml file (NPS naming convention is:
*_metadata.xml)</li>
<li>Use the EML::read_eml() function to load your EML file into R as an
R object.</li>
<li>Use EMLeditor functions to edit the metadata in R and evaluate
whether your metadata is acceptable (don’t forget to use
EML::eml_validate() to make sure you are generating valid EML).</li>
<li>Use the EML::write_eml() function to write the R object back to XML
(remember the NPS naming convention for metadata files is
*_metadata.xml).</li>
</ol>
<p>If you use EMLeditor functions to alter your metadata (e.g. any
function with the prefix “set_” in the name) they will also silently add
the National Park Service as a publisher (including location, <a href="https://ror.org/" class="external-link">ROR id</a>, etc) to your metadata unless you set
<code>NPS=FALSE</code>. If you leave the default setting as
<code>NPS=TRUE</code>, EMLeditor will also assume the data package is
being created “by or for the NPS” and add that information to the
metadata. For more details on customizing the publisher and originating
agency content, see the <a href="https://nationalparkservice.github.io/EMLeditor/articles/EMLeditor.html#non-nps-users" class="external-link">section
for non-NPS users</a>.</p>
<p>“set_” functions will also inject information about which version of
EMLeditor you used into the metadata.</p>
</div>
<div class="section level2">
<h2 id="a-minimal-workflow">A Minimal Workflow<a class="anchor" aria-label="anchor" href="#a-minimal-workflow"></a>
</h2>
<p>This workflow assumes your EML was generated using <a href="https://ediorg.github.io/EMLassemblyline/" class="external-link">EMLassemblyline</a>,
but will also work with any number of other EML generators (e.g. <a href="https://ezeml.edirepository.org/eml/" class="external-link">ezEML</a>).</p>
<p>Currently, many of the steps in EMLeditor are by default interactive
and will give you feedback on the current fields in your metadata, ask
if you want to update them, and report on the results of your edits. If
you would like to turn this option off, set <code>force = TRUE</code>
and see the section on <a href="https://nationalparkservice.github.io/EMLeditor/articles/EMLeditor.html#scripting-with-emleditor" class="external-link">automated
scripting with EMLeditor</a>.</p>
<div class="section level4">
<h4 id="import-your-metadata-into-r">Import your metadata into R<a class="anchor" aria-label="anchor" href="#import-your-metadata-into-r"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EML/man/read_eml.html" class="external-link">read_eml</a></span><span class="op">(</span><span class="st">"mymetadata_metdata.xml"</span>, from<span class="op">=</span><span class="st">"xml"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-information-about-cui">Add information about CUI<a class="anchor" aria-label="anchor" href="#add-information-about-cui"></a>
</h4>
<p>Add information about your Controlled Unclassified Information (CUI).
Because it is important to indicate not only what type of CUI there is,
but when (and why) there is not CUI, <strong>you must do this even if
your data package does not contain CUI</strong>. Choose from one of five
CUI codes. These are:</p>
<ul>
<li>PUBLIC - Does NOT contain CUI.</li>
<li>FED ONLY - Contains CUI. Only federal employees should have access
(similar to “internal only” in DataStore).</li>
<li>FEDCON - Contains CUI. Only federal employees and federal
contractors should have access (also very much like current “internal
only” setting in DataStore)</li>
<li>DL ONLY - Contains CUI. Should only be available to a named list of
individuals (where and how to list those individuals TBD)</li>
<li>NOCON - Contains CUI. Federal, state, local, or tribal employees may
have access, but contractors cannot.</li>
</ul>
<p>The first code is NPS specific. More information about the remaining
four codes can be found on the <a href="https://www.archives.gov/cui/registry/limited-dissemination" class="external-link">National
Archives website</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_cui.html">set_cui</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="st">"PUBLIC"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set-the-intellectual-rights">Set the intellectual rights<a class="anchor" aria-label="anchor" href="#set-the-intellectual-rights"></a>
</h4>
<p>EMLassemblyine and ezEML provide some attractive looking boilerplate
for setting the intellectual rights. It looks reasonable and so is easy
to just keep. However, NPS has some specific regulations about what can
and cannot be in the intellectualRights tag. Use
<code><a href="../reference/set_int_rights.html">set_int_rights()</a></code> to replace the text with NPS-approved
text. Note: You must first add the CUI dissemination code using
<code><a href="../reference/set_cui.html">set_cui()</a></code> as the dissemination code and license must agree.
That is, you cannot give a data package with a PUBLIC dissemination code
a “restricted” license (and vise versa: a restricted data package that
contains CUI cannot have a public domain or CC0 license).</p>
<ol style="list-style-type: decimal">
<li>“restricted”: If the data contains Controlled Unclassified
Information (CUI), the intellectual rights must read:</li>
</ol>
<blockquote>
<p><em>“This product has been determined to contain Controlled
Unclassified Information (CUI) by the National Park Service, and is
intended for internal use only. It is not published under an open
license. Unauthorized access, use, and distribution are
prohibited.”</em></p>
</blockquote>
<ol start="2" style="list-style-type: decimal">
<li>“public”: If the data do not contain CUI, the default is the public
domain. The intellectual rights must read:</li>
</ol>
<blockquote>
<p><em>“This work is in the public domain. There is no copyright or
license.”</em></p>
</blockquote>
<ol start="3" style="list-style-type: decimal">
<li>“CC0”: If you need a license, for instance if you are working with a
partner organization that requires a license, use <a href="https://creativecommons.org/publicdomain/zero/1.0/" class="external-link">CC0</a>:</li>
</ol>
<blockquote>
<p><em>“The person who associated a work with this deed has dedicated
the work to the public domain by waiving all of his or her rights to the
work worldwide under copyright law, including all related and
neighboring rights, to the extent allowed by law. You can copy, modify,
distribute and perform the work, even for commercial purposes, all
without asking permission.”</em></p>
</blockquote>
<p>The <code><a href="../reference/set_int_rights.html">set_int_rights()</a></code> function will also put the name of
your license in a <licensename> field in EML for DataStore
harvesting.</licensename></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># choose from "restricted", "public" and "CC0", see above:</span></span>
<span><span class="va">my_meta2</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/set_int_rights.html">set_int_rights</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"public"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-a-data-package-doi">Add a data package DOI<a class="anchor" aria-label="anchor" href="#add-a-data-package-doi"></a>
</h4>
<p>Add your data package’s Digital Object Identifier (DOI) to the
metadata. The <code>set_datastore_doi()</code> function requires that
you are logged on to the VPN. It initiates a draft data package
reference on DataStore, and populates the reference with a title pulled
from your metadata, “[DRAFT] : <your data package title>”. This
temporary title is purely for your tracking purposes and can easily be
updated later. The <code>set_datastore_doi()</code> function will then
insert the DOI for your data package into your metadata. There are a few
things to keep in mind:</your></p>
<ul>
<li>Your DOI and the data package reference are not yet active and are
not publicly accessible until after review and
activation/publication.</li>
<li>Be sure to upload your data package to the correct draft reference!
It is easy to create several draft references with the same draft title
so check the reference ID number carefully (We are working on making
this process easier and less error prone).</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu">set_datastore_doi</span><span class="op">(</span><span class="va">my_meta2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-information-about-the-drr-optional">Add information about the DRR (optional)<a class="anchor" aria-label="anchor" href="#add-information-about-the-drr-optional"></a>
</h4>
<p>If you are producing (or plan to produce) a DRR, add links to the DRR
describing the data package.</p>
<p>Similar to when you added the data package DOI, you will need the DOI
for the DRR you are drafting as well as the DRR’s Title. Again, go to <a href="https://irma.nps.gov/DataStore" class="external-link">DataStore</a> and initiate a draft
DRR, including a title. For the purposes of the data package, there is
no need to populate any other fields. At this point, you do not need to
activate the DRR reference and, while a DOI has been reserved for your
DRR, it will not be activated until after publication so that you have
plenty of time to construct the DRR.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_drr.html">set_drr</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="fl">7654321</span>, <span class="st">"DRR Title"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set-the-language">Set the language<a class="anchor" aria-label="anchor" href="#set-the-language"></a>
</h4>
<p>This is the human language (as opposed to computer language) that the
data package and metadata are constructed in. Examples include English,
Spanish, Navajo, etc. A <a href="https://www.loc.gov/standards/iso639-2/php/code_list.php" class="external-link">full
list of available languages</a> is available from the Library of
Congress. Please use the “English Name of Language” as an input. The
function will then convert your input to the appropriate 3-character ISO
639-2 code.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_language.html">set_language</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"English"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-content-unit-links">Add content unit links<a class="anchor" aria-label="anchor" href="#add-content-unit-links"></a>
</h4>
<p>These are the park units where data were collected from, for instance
ROMO, not ROMN. If the data package includes data from more than one
park, they can all be listed. For instance, if data were collected from
all park units within a network, each unit should be listed separately
rather than the network. This is because the geographic coordinates
corresponding to bounding boxes for each park unit listed will
automatically be generated and inserted into the metadata. Individual
park units will be more informative than the bounding box for the entire
network.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">park_units</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ROMO"</span>, <span class="st">"GRSD"</span>, <span class="st">"YELL"</span><span class="op">)</span></span>
<span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_content_units.html">set_content_units</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="va">park_units</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-the-producing-units">Add the producing unit(s)<a class="anchor" aria-label="anchor" href="#add-the-producing-units"></a>
</h4>
<p>This is the unit responsible for generating the data package. It may
be a single park (ROMO) or a network (ROMN). It may be identical to the
units listed in the previous step, overlapping, or entirely
different.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#a single proucing unit:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>my_meta2 <span class="ot">&lt;-</span> <span class="fu">set_producing_units</span>(my_meta2, <span class="st">"ROMN"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#for collaborative projects with multiple producing units:</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>my_meta2 <span class="ot">&lt;-</span> <span class="fu">set_producing_units</span>(my_meta2, <span class="fu">c</span>(<span class="st">"ROMN"</span>, <span class="st">"GRYN"</span>)</span></code></pre></div>
<p>Great! You’re done adding the essential NPS-specific metadata to your
EML. There are only two quick steps left:</p>
</div>
<div class="section level4">
<h4 id="validate-your-eml">Validate your EML<a class="anchor" aria-label="anchor" href="#validate-your-eml"></a>
</h4>
<p>OK, this first one might take a tick to run:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/emld/man/eml_validate.html" class="external-link">eml_validate</a></span><span class="op">(</span><span class="va">my_meta2</span><span class="op">)</span></span></code></pre></div>
<p>If eml_validate returns errors, inspect them and fix them. Feel free
to contribute an <a href="https://github.com/nationalparkservice/EMLeditor/issues" class="external-link">issue</a>,
or email <a href="mailto:robert_baker@nps.gov?subject=EMLeditor%20issues">Rob
Baker</a> with questions, concerns, or suggestions.</p>
</div>
<div class="section level4">
<h4 id="write-your-edited-eml-back-to-disk">Write your edited EML back to disk<a class="anchor" aria-label="anchor" href="#write-your-edited-eml-back-to-disk"></a>
</h4>
<p>Assuming everything went smoothly and eml_validate returns ‘TRUE’,
write your EML back to your disk so you can upload it with your data
files to DataStore. Keep in mind that the file name should end in
_metadata.xml. Also, when uploading your data package (data files and
metadata) to DataStore, make sure to upload it to the correct draft
reference!</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EML/man/write_eml.html" class="external-link">write_eml</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"mymetadatafilename_metadata.xml"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="additional-functions">Additional Functions<a class="anchor" aria-label="anchor" href="#additional-functions"></a>
</h2>
<p>The Minimal Workflow section assumes that you have correctly used <a href="https://ediorg.github.io/EMLassemblyline/" class="external-link">EMLassemblyline</a> to
generate a high-quality EML document. In the event that you find issues
with your EML or wish to correct portions of it, EMLeditor includes some
functions that allow you to edit common EML errors without having to
re-run EMLassemblyline.</p>
<div class="section level4">
<h4 id="edit-the-title">Edit the title<a class="anchor" aria-label="anchor" href="#edit-the-title"></a>
</h4>
<p>If your title has changed (for instance, perhaps reviewers have
suggested a title that you realize you prefer) or you find a typo in
your title, you can update your title directly in EMLeditor using
<code><a href="../reference/set_title.html">set_title()</a></code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#give my data package a new title:</span></span>
<span><span class="va">my_meta2</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/set_title.html">set_title</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"This is my new Title"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check the new title:</span></span>
<span><span class="fu"><a href="../reference/get_title.html">get_title</a></span><span class="op">(</span><span class="va">my_meta2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="edit-the-abstract">Edit the abstract<a class="anchor" aria-label="anchor" href="#edit-the-abstract"></a>
</h4>
<p>Because your abstract will be prominently displayed on the DataStore
landing page and will be forwarded to DataCite for DOI assignment and
data.gov (among other places) to enhance data discoverability and reuse,
it is important that your abstract not contain errors. Typographical
errors, particularly non-ascii characters are common problems in the
abstract of EML documents. The <code><a href="../reference/set_abstract.html">set_abstract()</a></code> function
includes a number of routines to minimize errors introduced by word
processors or non-UTF8 encoding (we are pretty sure you don’t want that
“&amp;amp13;” in your abstract) but it cannot anticipate all potential
eventualities. You are therefore encouraged to construct your abstract
in Notepad or other text editor (<strong>NOT</strong> a word processor
such as Microsoft Word). This is a relatively simple function and does
not readily support multiple paragraphs, bullet points, or the like.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#replace your abstract:</span></span>
<span><span class="va">my_meta2</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/set_abstract.html">set_abstract</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"This is my new abstract. I can use this function to replace it as many times as I like until it looks just the way I want it to."</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check the new abstract:</span></span>
<span><span class="fu"><a href="../reference/get_abstract.html">get_abstract</a></span><span class="op">(</span><span class="va">my_meta2</span><span class="op">)</span></span></code></pre></div>
<p>Check back here for more handy functions in the future. If there’s
something you’d like to see added, please let us know by posting an <a href="https://github.com/nationalparkservice/EMLeditor/issues" class="external-link">Issue</a>
on github.</p>
<p>Don’t forget to validate your updated EML file and to write it back
to .xml after using EMLeditor to make edits.</p>
</div>
</div>
<div class="section level2">
<h2 id="scripting-with-emleditor">Scripting with EMLeditor<a class="anchor" aria-label="anchor" href="#scripting-with-emleditor"></a>
</h2>
<p>The interactive feedback and prompts provided by EMLeditor functions
can be turned off to enable efficient scripting. All “set_” class
functions have a parameter, <code>force</code> that defaults to
<code>force = FALSE</code>. To turn off the feedback and prompts, set
<code>force = TRUE</code> when calling each function. Be careful using
the functions in this way as they may - or may not - make changes to
your metadata and you will not be advised of any change or lack of
change. Inspect your final product carefully.</p>
</div>
<div class="section level2">
<h2 id="custom-publisherproducer">Custom Publisher/Producer<a class="anchor" aria-label="anchor" href="#custom-publisherproducer"></a>
</h2>
<p>EMLeditor functions are designed primarily for use by staff at the
National Park Service for publication of data packages to DataStore.
Consequently, all “set_” class functions silently perform two operations
by default:</p>
<ol style="list-style-type: decimal">
<li>They set the publisher to the National Park Service (and the
location to the Fort Collins office)</li>
<li>They specify the agency that created the data package as NPS and set
a field “by or for NPS” to TRUE</li>
</ol>
<p>You can prevent set_class functions from performing these operations
by changing the default status of the parameter <code>NPS = TRUE</code>
to <code>NPS = FALSE</code>. This will leave your publisher information
untouched and will not create an additionalMetadata item for the agency
that created the data package.</p>
<p>If you would like to set the publisher to something other than the
Fort Collins Office of the National Park Service or your would like to
set the agency that created the data package to something other than
NPS, use the <code><a href="../reference/set_publisher.html">set_publisher()</a></code> function. Be sure to specify
<code>NPS = FALSE</code> or the function will perform the default
operations (set publisher to NPS at the Fort Collins Office and set the
agency to NPS).</p>
<p><strong>Warning:</strong> set_publisher should only be used in a few,
likely rare, circumstances:</p>
<ol style="list-style-type: decimal">
<li>If the publisher Is <strong>NOT</strong> the National Park
Service</li>
<li>If the contact address for the publisher is <strong>NOT</strong> the
central office in Fort Collins (all data packages uploaded to DataStore
will be published by the Fort Collins Office of NPS)</li>
<li>If the originating agency is <strong>NOT</strong> the NPS (i.e. a
contractor or partner organization)</li>
<li>If the data package is <strong>NOT</strong> created for or by the
NPS</li>
</ol>
<p>It’s probably a good idea to run</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html" class="external-link">args</a></span><span class="op">(</span><span class="va">set_publisher</span><span class="op">)</span></span></code></pre></div>
<p>to make sure you have all the arguments, especially those with
defaults, properly specified.</p>
</div>
<div class="section level2">
<h2 id="check-your-eml">Check your EML<a class="anchor" aria-label="anchor" href="#check-your-eml"></a>
</h2>
<p>It’s always a good idea to check your EML. Other than visually
inspecting the .xml, file three good approaches are:</p>
<ol style="list-style-type: decimal">
<li>Check whether your EML is schema-valid:</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use the eml_validate function from the EML package:</span></span>
<span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/emld/man/eml_validate.html" class="external-link">eml_validate</a></span><span class="op">(</span><span class="va">my_meta2</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Build a <em>mock-up</em> of a readme file:</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Outputs readme to the screen</span></span>
<span><span class="fu"><a href="../reference/write_readme.html">write_readme</a></span><span class="op">(</span><span class="va">my_meta2</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Alternatively, save the readme to a text file</span></span>
<span><span class="fu"><a href="../reference/write_readme.html">write_readme</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"readme.txt"</span><span class="op">)</span> </span></code></pre></div>
<p>The <em>mock</em> readme file is an approximation of the readme file
that will automatically be generated by DataStore upon upload and
included in your data package. It’s a good, human readable, way to check
whether many critical elements of your EML are properly formatted.
Although the actual readme on DataStore may differ slightly, if the
<em>mock</em> readme looks good, that’s a good indication that the
readme on DataStore will too. On the other hand, if there is something
off in the <em>mock</em> readme, that’s a good indication that you may
want to go back and fix the relevant portions of your EML.</p>
<p><strong>do not upload your <em>mock</em> readme file to
DataStore!</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>Run a series of NPS-specific checks on your metadata. These are the
same checks that reviewers will likely run prior to publication. They
are metadata-specific subset of the functions included in the <a href="https://nationalparkservice.github.io/DPchecker/" class="external-link">DPchecker</a>
package.</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#If you have not already written your metadata back to .xml:</span></span>
<span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EML/man/write_eml.html" class="external-link">write_eml</a></span><span class="op">(</span><span class="va">mymeta2</span>, <span class="st">"my_metadata.xml"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#run checks on your metadata. You must tell the check_eml() function where your file is. It will default to the current working directory. There must be only one xml file in the directory.</span></span>
<span></span>
<span><span class="co">#If your metadata is in the current working directory:</span></span>
<span><span class="fu"><a href="../reference/check_eml.html">check_eml</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#to change to a new sub-directory:</span></span>
<span><span class="fu"><a href="../reference/check_eml.html">check_eml</a></span><span class="op">(</span>directory<span class="op">=</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/here/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"my_new_directory"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#to change to a directory higher up in the hierarchy:</span></span>
<span><span class="fu"><a href="../reference/check_eml.html">check_eml</a></span><span class="op">(</span>directory<span class="op">=</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/here/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">".."</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#to move higher up in the hierarchy, then select a different subdirectory:</span></span>
<span><span class="fu"><a href="../reference/check_eml.html">check_eml</a></span><span class="op">(</span>directory<span class="op">=</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/here/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">".."</span>, <span class="st">"a_different_sub_directory"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Robert Baker, Judd Patterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
