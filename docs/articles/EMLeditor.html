<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="EMLeditor">
<title>EMLeditor • EMLeditor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EMLeditor">
<meta property="og:description" content="EMLeditor">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EMLeditor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/EMLeditor.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>EMLeditor</h1>
            
      
      
      <div class="d-none name"><code>EMLeditor.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>In addition to <a href="https://github.com/nationalparkservice/EMLeditor" class="external-link">EMLeditor</a>,
you will also need the <a href="https://cran.r-project.org/web/packages/EML/index.html" class="external-link">EML</a>
package to complete these steps.</p>
<p>You can download and install them individually, or get everything you
need at once from the <a href="https://github.com/nationalparkservice/NPSdataverse" class="external-link">NPSdataverse</a>
using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install the NPSdataverse:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nationalparkservice/NPSdataverse"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RobLBaker/NPSdataverse" class="external-link">NPSdataverse</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#individual install:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nationalparkservice/EMLeditor"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"EML"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/EML/" class="external-link">EML</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://roblbaker.github.io/EMLeditor/">EMLeditor</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="workflow-outline">Workflow outline<a class="anchor" aria-label="anchor" href="#workflow-outline"></a>
</h2>
<p>EMLeditor’s primary objective is to edit and view EML formatted
files, not to generate them from scratch. A suggested workflow is:</p>
<ol style="list-style-type: decimal">
<li>Use the EMLassemblyline::make_eml() to generate an initial EML
document and save it as a .xml file (NPS naming convention is:
*_metadata.xml)</li>
<li>Use the EML::read_eml() function to load your EML file into R as an
R object.</li>
<li>Use EMLeditor functions to edit the metadata in R and evaluate
whether your metadata is acceptable (don’t forget to use
EML::eml_validate() to make sure you are generating valid EML).</li>
<li>Use the EML::write_eml() function to write the R object back to XML
(remember the NPS naming convention for metadata files is
*_metadata.xml).</li>
</ol>
<p>If you use EMLeditor functions to alter your metadata (e.g. any
function with the prefix “set_” in the name) they will also silently add
the National Park Service as a publisher (including location, <a href="https://ror.org/" class="external-link">ROR id</a>, etc) to your metadata unless you set
NPS=FALSE. If you leave the default setting as NPS=TRUE, EMLeditor will
also assume the data package is being created “by or for the NPS” and
add that information to the metadata.</p>
<p>“set_” functions will also inject information about which version of
EMLeditor you used into the metadata.</p>
</div>
<div class="section level2">
<h2 id="a-minimal-workflow">A Minimal Workflow<a class="anchor" aria-label="anchor" href="#a-minimal-workflow"></a>
</h2>
<p>This workflow assumes your EML was generated using <a href="https://github.com/EDIorg/emlAssemblyLine" class="external-link">EMLassemblyline</a>,
but will also work with any number of other EML generators (e.g. <a href="https://ezeml.edirepository.org/eml/" class="external-link">ezEML</a>).</p>
<p>Currently, many of the steps in EMLeditor are interactive and will
give you feedback on the current fields in your metadata, ask if you
want to update them, and report on the results of your edits.</p>
<div class="section level4">
<h4 id="import-your-metadata-into-r">Import your metadata into R<a class="anchor" aria-label="anchor" href="#import-your-metadata-into-r"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EML/man/read_eml.html" class="external-link">read_eml</a></span><span class="op">(</span><span class="st">"mymetadata_metdata.xml"</span>, from<span class="op">=</span><span class="st">"xml"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-information-about-cui">Add information about CUI<a class="anchor" aria-label="anchor" href="#add-information-about-cui"></a>
</h4>
<p>Add information about your Controlled Unclassified Information (CUI).
Because it is important to indicate not only what type of CUI there is,
but when (and why) there is not CUI, <strong>you must do this even if
your data package does not contain CUI</strong>. Choose from one of
seven CUI codes. These are:</p>
<ul>
<li>PUBFUL - Does NOT contain CUI. The original data contained no CUI.
No data were obscured or altered to generate the data package.</li>
<li>PUBVER - Does NOT contain CUI. The original data contained CUI, but
in this data package CUI have been obscured so that it no longer
contains CUI.</li>
<li>NPSONLY - Contains CUI. For NPS access only.</li>
<li>FED ONLY - Contains CUI. Only federal employees should have access
(similar to “internal only” in DataStore).</li>
<li>FEDCON - Contains CUI. Only federal employees and federal
contractors should have access (also very much like current “internal
only” setting in DataStore)</li>
<li>DL ONLY - Contains CUI. Should only be available to a named list of
individuals (where and how to list those individuals TBD)</li>
<li>NOCON - Contains CUI. Federal, state, local, or tribal employees may
have access, but contractors cannot.</li>
</ul>
<p>The first three codes are NPS specific. More information about the
remaining four codes can be found on the <a href="https://www.archives.gov/cui/registry/limited-dissemination" class="external-link">National
Archives website</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_cui.html">set_cui</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="st">"PUBFUL"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-a-data-package-doi">Add a data package DOI<a class="anchor" aria-label="anchor" href="#add-a-data-package-doi"></a>
</h4>
<p>Add your data package’s Digital Object Identifier (DOI). To do this,
you will need the seven-digit Reference ID from DataStore for the data
package. To get the code, go to <a href="https://irma.nps.gov/DataStore/" class="external-link">DataStore</a> and initiate a
draft reference (but do not activate it). This act reserves your DOI,
but it is not activated until after your data package is published.</p>
<p>There is no need to fill in any additional fields in DataStore at
this point - many of them will automatically be populated based on your
metadata at upload.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_doi.html">set_doi</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="fl">1234567</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-information-about-the-drr-optional">Add information about the DRR (optional)<a class="anchor" aria-label="anchor" href="#add-information-about-the-drr-optional"></a>
</h4>
<p>If you are producing (or plan to produce) a DRR, add links to the DRR
describing the data package.</p>
<p>Similar to when you added the data package DOI, you will need the DOI
for the DRR you are drafting as well as the DRR’s Title. Again, go to <a href="https://irma.nps.gov/DataStore" class="external-link">DataStore</a> and initiate a draft
DRR, including a title. For the purposes of the data package, there is
no need to populate any other fields. At this point, you do not need to
activate the DRR reference and, while a DOI has been reserved for your
DRR, it will not be activated until after publication so that you have
plenty of time to construct the DRR.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu">set_drr_doi</span><span class="op">(</span><span class="va">my_meta2</span>, <span class="fl">7654321</span>, <span class="st">"DRR Title"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set-the-language">Set the language<a class="anchor" aria-label="anchor" href="#set-the-language"></a>
</h4>
<p>This is the human language (as opposed to computer language) that the
data package and metadata are constructed in. Examples include English,
Spanish, Navajo, etc. A [full list of available languages] is available
from the Library of Congress. Please use the “English Name of Language”
as an input. The function will then convert your input to the
appropriate 3-character ISO 639-2 code.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_language.html">set_language</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"English"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-content-unit-links">Add Content Unit Links<a class="anchor" aria-label="anchor" href="#add-content-unit-links"></a>
</h4>
<p>These are the park units where data were collected from, for instance
ROMO, not ROMN. If the data package includes data from more than one
park, they can all be listed. For instance, if data were collected from
all park units within a network, each unit should be listed separately
rather than the network. This is because the geographic coordinates
corresponding to bounding boxes for each park unit listed will
automatically be generated and inserted into the metadata. Individual
park units will be more informative than the bounding box for the entire
network.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>park_units <span class="ot">&lt;-</span> (<span class="st">"ROMO"</span>, <span class="st">"GRSD"</span>, <span class="st">"YELL"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>my_meta2 <span class="ot">&lt;-</span> <span class="fu">set_content_units</span>(my_meta2, park_units)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-the-producing-unit">Add the Producing Unit<a class="anchor" aria-label="anchor" href="#add-the-producing-unit"></a>
</h4>
<p>This is the unit responsible for generating the data package. It may
be a single park (ROMO) or a network (ROMN). It may be identical to the
units listed in the previous step, overlapping, or entirely
different.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_producing_units.html">set_producing_units</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"ROMN"</span><span class="op">)</span></span></code></pre></div>
<p>Great! You’re done adding the essential NPS-specific metadata to your
EML. There are only two quick steps left:</p>
</div>
<div class="section level4">
<h4 id="validate-your-eml">Validate your EML<a class="anchor" aria-label="anchor" href="#validate-your-eml"></a>
</h4>
<p>OK, this first one might take a tick to run:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/emld/man/eml_validate.html" class="external-link">eml_validate</a></span><span class="op">(</span><span class="va">my_meta2</span><span class="op">)</span></span></code></pre></div>
<p>If eml_validate returns errors, inspect them and fix them. Feel free
to contribute an <a href="https://github.com/nationalparkservice/EMLeditor/issues" class="external-link">issue</a>,
or email <a href="mailto:robert_baker@nps.gov?subject=EMLeditor%20issues">Rob
Baker</a> with questions, concerns, or suggestions.</p>
</div>
<div class="section level4">
<h4 id="write-your-edited-eml-back-to-disk">Write your edited EML back to disk<a class="anchor" aria-label="anchor" href="#write-your-edited-eml-back-to-disk"></a>
</h4>
<p>Assuming everything went smoothly and eml_validate returns ‘TRUE’,
write your EML back to your disk so you can upload it with your data
files to DataStore. Keep in mind that the file name should end in
_metadata.xml. Also, when uploading your data package (data files and
metadata) to DataStore, make sure to upload it to the correct draft
reference!</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EML/man/write_eml.html" class="external-link">write_eml</a></span><span class="op">(</span><span class="va">my_meta2</span>, <span class="st">"mymetadatafilename_metadata.xml"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="scripting-with-emleditor">Scripting with EMLeditor<a class="anchor" aria-label="anchor" href="#scripting-with-emleditor"></a>
</h2>
<p>The interactive feedback and prompts provided by EMLeditor functions
can be turned off to enable efficient scripting. All “set_” class
functions have a parameter, <em>force</em> that defaults to <em>force =
FALSE</em>. To turn off the feedback and prompts, set <em>r force =
TRUE</em> when calling each function. Be careful using the functions in
this way as they may - or may not - make changes to your metadata and
you will not be advised of any change or lack of change. Inspect your
final product carefully.</p>
</div>
<div class="section level2">
<h2 id="non-nps-users">non-NPS users<a class="anchor" aria-label="anchor" href="#non-nps-users"></a>
</h2>
<p>EMLeditor functions are designed primarily for use by staff at the
National Park Service for publication of data packages to DataStore.
Consequently, all “set_” class functions silently perform two operations
by default:</p>
<ol style="list-style-type: decimal">
<li>They set the publisher to the National Park Service (and the
location to the Fort Collins office)</li>
<li>They specify the agency that created the data package as NPS and set
a field “by or for NPS” to TRUE.</li>
</ol>
<p>You can prevent set_class functions from performing these operations
by changing the default status of the parameter <em>NPS = TRUE</em> to
<em>NPS = FALSE</em>. This will leave your publisher information
untouched and will not create an additionalMetadata item for the agency
that created the data package.</p>
<p>If you would like to set the publisher to something other than the
Fort Collins Office of the National Park Service or your would like to
set the agency that created the data package to something other than
NPS, use the <em>set_publisher</em> function. Be sure to specify <em>NPS
= FALSE</em> or the function will perform the default operations (set
publisher to NPS at the Fort Collins Office and set the agency to
NPS).</p>
<p><strong>Warning:</strong> set_publisher should only be used in a few,
likely rare, circumstances:</p>
<ol style="list-style-type: decimal">
<li>If the publisher Is <strong>NOT</strong> the National Park
Service</li>
<li>If the contact address for the publisher is <strong>NOT</strong> the
central office in Fort Collins (all data packages uploaded to DataStore
will be published by the Fort Collins Office of NPS)</li>
<li>If the originating agency is <strong>NOT</strong> the NPS (i.e. a
contractor or partner organization)</li>
<li>If the data package is <strong>NOT</strong> created for or by the
NPS</li>
</ol>
<p>It’s probably a good idea to run</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html" class="external-link">args</a></span><span class="op">(</span><span class="va">set_publisher</span><span class="op">)</span></span></code></pre></div>
<p>to make sure you have all the arguments, especially those with
defaults, properly specified.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Robert Baker, Judd Patterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
