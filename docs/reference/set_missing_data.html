<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Adds a missing value code and definition to EML metadata — set_missing_data • EMLeditor</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adds a missing value code and definition to EML metadata — set_missing_data"><meta name="description" content='Missing data must have a missing data code and missing data code definition. set_missing_data() can add a single missing value code and single missing value code definition. Missing data should be clearly indicated in the data with a missing data code (e.g "NA", "NaN", "Missing", "blank" etc.). It is generally a good idea to not use special characters for missing data codes (e.g. N/A is not advised). If it is absolutely necessary to leave a cell empty with no code, that cell still needs a missing value code and definition in the metadata. Acceptable codes in this case are "empty" and "blank" with a suitable definition that states the cells are purposefully left empty.'><meta property="og:description" content='Missing data must have a missing data code and missing data code definition. set_missing_data() can add a single missing value code and single missing value code definition. Missing data should be clearly indicated in the data with a missing data code (e.g "NA", "NaN", "Missing", "blank" etc.). It is generally a good idea to not use special characters for missing data codes (e.g. N/A is not advised). If it is absolutely necessary to leave a cell empty with no code, that cell still needs a missing value code and definition in the metadata. Acceptable codes in this case are "empty" and "blank" with a suitable definition that states the cells are purposefully left empty.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EMLeditor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a01_prereqs.html">Pre-Requisites</a></li>
    <li><a class="dropdown-item" href="../articles/a02_EML_creation_script.html">EML Creation Script</a></li>
    <li><a class="dropdown-item" href="../articles/a03_Template_edits.html">Editing .txt Files</a></li>
    <li><a class="dropdown-item" href="../articles/a04_Editing_fixing_eml.html">Editing or fixing EML Files</a></li>
    <li><a class="dropdown-item" href="../articles/a05_advanced_functionality.html">Advanced Functionality</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nationalparkservice/EMLeditor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Adds a missing value code and definition to EML metadata</h1>
      <small class="dont-index">Source: <a href="https://github.com/nationalparkservice/EMLeditor/blob/HEAD/R/editEMLfunctions.R" class="external-link"><code>R/editEMLfunctions.R</code></a></small>
      <div class="d-none name"><code>set_missing_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Missing data must have a missing data code and missing data code definition. <code>set_missing_data()</code> can add a single missing value code and single missing value code definition. Missing data should be clearly indicated in the data with a missing data code (e.g "NA", "NaN", "Missing", "blank" etc.). It is generally a good idea to not use special characters for missing data codes (e.g. N/A is not advised). If it is absolutely necessary to leave a cell empty with no code, that cell still needs a missing value code and definition in the metadata. Acceptable codes in this case are "empty" and "blank" with a suitable definition that states the cells are purposefully left empty.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_missing_data</span><span class="op">(</span></span>
<span>  <span class="va">eml_object</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  <span class="va">columns</span>,</span>
<span>  <span class="va">codes</span>,</span>
<span>  <span class="va">definitions</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  NPS <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-eml-object">eml_object<a class="anchor" aria-label="anchor" href="#arg-eml-object"></a></dt>
<dd><p>is an EML-formatted R object, either generated in R or imported (typically from an EML-formatted .xml file) using EML::read_eml(<filename>, from="xml").</filename></p></dd>


<dt id="arg-files">files<a class="anchor" aria-label="anchor" href="#arg-files"></a></dt>
<dd><p>String or List of strings. These are the files that contain undocumented missing data, e.g "my_data_file1.csv".</p></dd>


<dt id="arg-columns">columns<a class="anchor" aria-label="anchor" href="#arg-columns"></a></dt>
<dd><p>String or List of strings. These are the columns with missing data for which you would like to add missing data codes and explanations in to the metadata, e.g. "scientificName".</p></dd>


<dt id="arg-codes">codes<a class="anchor" aria-label="anchor" href="#arg-codes"></a></dt>
<dd><p>String or list of strings. These are the missing value codes you would like associated with the column in question, e.g. "missing" or "NA".</p></dd>


<dt id="arg-definitions">definitions<a class="anchor" aria-label="anchor" href="#arg-definitions"></a></dt>
<dd><p>String or list of strings. These are the missing value code definitions associated with the missing value codes, e.g "not recorded" or "sample damaged when the lab flooded".</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>logical. Defaults to false. If set to FALSE, a more interactive version of the function requesting user input and feedback. Setting force = TRUE facilitates scripting.</p></dd>


<dt id="arg-nps">NPS<a class="anchor" aria-label="anchor" href="#arg-nps"></a></dt>
<dd><p>Logical. Defaults to TRUE. <strong>Most NPS users should leave this as the default</strong>. Only under specific circumstances should it be set to FALSE: if you are <strong>not</strong> publishing with NPS, if you need to set the publisher location to some place other than the Fort Collins Office (e.g. you are NOT working on a data package) or your product is "for" the NPS but not "by" the NPS and you need to specify a different agency, set NPS = FALSE. When NPS=TRUE, the function will over-write existing publisher info and inject NPS as the publisher along the the Central Office in Fort Collins as the location. Additionally, it sets the "for or by NPS" field to TRUE and specifies the originating agency as NPS.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>eml_object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>set_missing_data()</code> be used on an individual column or can accept lists of files, column names, codes, and definitions. Make sure that each missing value has a file, column, single code, and single definition associated with it (if you need multiple missing value codes and definitions per column, please use the <code>set_more_missing()</code> function). If you have many missing value codes and definitions, you might consider constructing (or import) a dataframe to describe them:</p>
<p>Example data frame:
df &lt;- data.frame(files       = c("table1.csv",
"table2.csv",
"table3.csv",
"table4.csv"),
columns     = c("EventDate",
"scientificName",
"eventID",
"decimalLatitude"),
codes       = c("NA", "NA", "missing", "blank"),
definitions = c("not recorded",
"not identified",
"not recorded",
"intentionally left blank - not recorded"))</p>
<p>meta2 &lt;- set_missing_data(eml_object = metadata,
files = df$files,
columns = df$columns,
codes = df$codes,
definitions = df$definitions)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">#For a single column of data in a single file:</span></span></span>
<span class="r-in"><span><span class="va">meta2</span> <span class="op">&lt;-</span> <span class="fu">set_missing_data</span><span class="op">(</span><span class="va">my_metadata</span>,</span></span>
<span class="r-in"><span>                          <span class="st">"table1.csv"</span>,</span></span>
<span class="r-in"><span>                          <span class="st">"scientificName"</span>,</span></span>
<span class="r-in"><span>                          <span class="st">"NA"</span>,</span></span>
<span class="r-in"><span>                          <span class="st">"Unable to identify"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#For multiple columns of data, potentially across multiple files:</span></span></span>
<span class="r-in"><span><span class="co">#(blank cells must have the missing value code of "blank" or "empty")</span></span></span>
<span class="r-in"><span><span class="va">meta2</span> <span class="op">&lt;-</span> <span class="fu">set_missing_data</span><span class="op">(</span><span class="va">my_metadata</span>,</span></span>
<span class="r-in"><span>                         files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"table1.csv"</span>, <span class="st">"table1.csv"</span>, <span class="st">"table2.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span>, <span class="st">"time"</span>, <span class="st">"scientificName"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NA"</span>, <span class="st">"missing"</span>, <span class="st">"blank"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         definitions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date not recorded"</span>,</span></span>
<span class="r-in"><span>                                       <span class="st">"time not recorded"</span>,</span></span>
<span class="r-in"><span>                                       <span class="st">"intentionally left blank - missing"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                                       <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Baker, Judd Patterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

